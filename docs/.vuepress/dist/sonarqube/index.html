<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Sonarqube | ceruttimaicon.js.org</title>
    <meta name="description" content="Minhas competências, anotações e documentações :)">
    
    
    <link rel="preload" href="/assets/css/0.styles.6114eb0d.css" as="style"><link rel="preload" href="/assets/js/app.9f1471da.js" as="script"><link rel="preload" href="/assets/js/2.028e1938.js" as="script"><link rel="preload" href="/assets/js/29.38dc25ea.js" as="script"><link rel="prefetch" href="/assets/js/10.08868909.js"><link rel="prefetch" href="/assets/js/11.943674e1.js"><link rel="prefetch" href="/assets/js/12.1b47a952.js"><link rel="prefetch" href="/assets/js/13.d624b346.js"><link rel="prefetch" href="/assets/js/14.9fc2e13f.js"><link rel="prefetch" href="/assets/js/15.b4d1d070.js"><link rel="prefetch" href="/assets/js/16.f8600bec.js"><link rel="prefetch" href="/assets/js/17.04779655.js"><link rel="prefetch" href="/assets/js/18.39be547d.js"><link rel="prefetch" href="/assets/js/19.123c4600.js"><link rel="prefetch" href="/assets/js/20.c2e66d08.js"><link rel="prefetch" href="/assets/js/21.6337def7.js"><link rel="prefetch" href="/assets/js/22.4c3201aa.js"><link rel="prefetch" href="/assets/js/23.43b37aba.js"><link rel="prefetch" href="/assets/js/24.50c00c2e.js"><link rel="prefetch" href="/assets/js/25.cf9020ac.js"><link rel="prefetch" href="/assets/js/26.3bb7a708.js"><link rel="prefetch" href="/assets/js/27.321a67b7.js"><link rel="prefetch" href="/assets/js/28.95794bb3.js"><link rel="prefetch" href="/assets/js/3.2163d001.js"><link rel="prefetch" href="/assets/js/30.0106a1e8.js"><link rel="prefetch" href="/assets/js/31.fafb5c65.js"><link rel="prefetch" href="/assets/js/4.59116900.js"><link rel="prefetch" href="/assets/js/5.d9d48266.js"><link rel="prefetch" href="/assets/js/6.e034057d.js"><link rel="prefetch" href="/assets/js/7.b0b0ffdc.js"><link rel="prefetch" href="/assets/js/8.cf52df91.js"><link rel="prefetch" href="/assets/js/9.318f7b79.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6114eb0d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/images/perfil.jpeg" alt="ceruttimaicon.js.org" class="logo"> <span class="site-name can-hide">ceruttimaicon.js.org</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link">Guide</a></div><div class="nav-item"><a href="https://www.linkedin.com/in/maicon-cerutti-516918114/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Linkedin
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/CeruttiMaicon" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link">Guide</a></div><div class="nav-item"><a href="https://www.linkedin.com/in/maicon-cerutti-516918114/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Linkedin
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/CeruttiMaicon" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Guide</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Postgres</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Python</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Docker</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Sistemas Operacionais</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Amazon</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Laravel</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Lumen</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue.JS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>GIT</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Zero Absoluto</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>SonarQuebe</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/sonarqube/" class="active sidebar-link">Sonarqube</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/sonarqube/#instalacao-projeto" class="sidebar-link">Instalação projeto</a></li><li class="sidebar-sub-header"><a href="/sonarqube/#primeiros-passos" class="sidebar-link">Primeiros passos</a></li><li class="sidebar-sub-header"><a href="/sonarqube/#executando-o-scanner-em-um-projeto" class="sidebar-link">Executando o Scanner em um projeto</a></li></ul></li><li><a href="/sonarqube-utilizacao-rapida/" class="sidebar-link">Sonarqube - Utilização Rápida</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="sonarqube"><a href="#sonarqube" class="header-anchor">#</a> Sonarqube</h1> <h2 id="instalacao-projeto"><a href="#instalacao-projeto" class="header-anchor">#</a> Instalação projeto</h2> <h3 id="requerimentos-tecnicos"><a href="#requerimentos-tecnicos" class="header-anchor">#</a> Requerimentos técnicos</h3> <p>Docker - <a href="https://www.docker.com/get-started" target="_blank" rel="noopener noreferrer">https://www.docker.com/get-started<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Git - <a href="https://git-scm.com/downloads" target="_blank" rel="noopener noreferrer">https://git-scm.com/downloads<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="primeiros-passos"><a href="#primeiros-passos" class="header-anchor">#</a> Primeiros passos</h2> <p>Configuração SonarQube</p> <ol><li>Execute o servidor SonarQube</li></ol> <div class="language- extra-class"><pre class="language-text"><code>docker run -d --name sonarqube -p 9000:9000 sonarqube:7.5-community
</code></pre></div><p>O projeto Sonarquebe deve estar iniciando.</p> <p>Entre em <a href="http://localhost:9000" target="_blank" rel="noopener noreferrer">http://localhost:9000<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <ol start="2"><li>Execute e verifique se um servidor está instalado e executando:</li></ol> <div class="language- extra-class"><pre class="language-text"><code>docker ps
</code></pre></div><ol start="3"><li><p>Aguarde o servidor iniciar e efetue login no servidor SonarQube em <a href="http://localhost:9000" target="_blank" rel="noopener noreferrer">http://localhost:9000<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> Utilize credenciais padrão: login: admin password:admin</p></li> <li><p>Acesse: <a href="http://localhost:9000/account/security" target="_blank" rel="noopener noreferrer">http://localhost:9000/account/security<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> e gere um token.</p></li> <li><p>Copie o valor do token e salve-o em algum lugar, pois você não poderá vê-lo novamente! Você precisará mais tarde neste tutorial.</p></li> <li><p>Crie uma nova pasta para a imagem do Scanner SonarQube dockerfile.</p></li></ol> <p>Está pasta será responsável para executar os scanners de código dos projetos que você precisar.</p> <p>Execute:</p> <div class="language- extra-class"><pre class="language-text"><code>mkdir sonarqube-scanner
</code></pre></div><p>Agora entraremos na pasta para criar os arquivos docker.</p> <div class="language- extra-class"><pre class="language-text"><code>cd sonarqube-scanner
</code></pre></div><p>Criaremos o Dockerfile.</p> <div class="language- extra-class"><pre class="language-text"><code>touch Dockerfile
</code></pre></div><p>Agora edite este arquivo com estas informações:</p> <div class="language-docker extra-class"><pre class="language-docker"><code><span class="token comment"># This is docker file for our sonarqube-scanner. You don't need to read it since</span>
<span class="token comment"># the goal of this tutorial isn't about teaching docker or about presenting the best</span>
<span class="token comment"># way for creating Sonarqube scanner image. Of course feel free to check on it if you like.</span>
<span class="token comment"># Get dotnetcore SDK</span>
<span class="token keyword">FROM</span> microsoft/dotnet<span class="token punctuation">:</span>2.2.104<span class="token punctuation">-</span>sdk AS sonarqube
<span class="token comment"># Install OpenJDK-8</span>
<span class="token keyword">RUN</span> apt<span class="token punctuation">-</span>get update &amp;&amp; \
    apt<span class="token punctuation">-</span>get install <span class="token punctuation">-</span>y openjdk<span class="token punctuation">-</span>8<span class="token punctuation">-</span>jdk &amp;&amp; \
    apt<span class="token punctuation">-</span>get install <span class="token punctuation">-</span>y ant &amp;&amp; \
    apt<span class="token punctuation">-</span>get clean;
<span class="token comment"># Fix certificate issues</span>
<span class="token keyword">RUN</span> apt<span class="token punctuation">-</span>get update &amp;&amp; \
    apt<span class="token punctuation">-</span>get install ca<span class="token punctuation">-</span>certificates<span class="token punctuation">-</span>java &amp;&amp; \
    apt<span class="token punctuation">-</span>get clean &amp;&amp; \
    update<span class="token punctuation">-</span>ca<span class="token punctuation">-</span>certificates <span class="token punctuation">-</span>f;
<span class="token comment"># Setup JAVA_HOME</span>
<span class="token keyword">ENV</span> JAVA_HOME /usr/lib/jvm/java<span class="token punctuation">-</span>8<span class="token punctuation">-</span>openjdk<span class="token punctuation">-</span>amd64/
<span class="token keyword">RUN</span> export JAVA_HOM
<span class="token comment"># Env variables</span>
<span class="token keyword">ENV</span> NODE_VERSION 10.13.0
<span class="token keyword">ENV</span> NODE_DOWNLOAD_SHA b4b5d8f73148dcf277df413bb16827be476f4fa117cbbec2aaabc8cc0a8588e1
<span class="token comment"># Install node.js</span>
<span class="token keyword">RUN</span> curl <span class="token punctuation">-</span>SL <span class="token string">&quot;https://nodejs.org/dist/v${NODE_VERSION}/node-v${NODE_VERSION}-linux-x64.tar.gz&quot;</span> <span class="token punctuation">-</span><span class="token punctuation">-</span>output nodejs.tar.gz \
    &amp;&amp; echo <span class="token string">&quot;$NODE_DOWNLOAD_SHA nodejs.tar.gz&quot;</span> <span class="token punctuation">|</span> sha256sum <span class="token punctuation">-</span>c <span class="token punctuation">-</span> \
    &amp;&amp; tar <span class="token punctuation">-</span>xzf <span class="token string">&quot;nodejs.tar.gz&quot;</span> <span class="token punctuation">-</span>C /usr/local <span class="token punctuation">-</span><span class="token punctuation">-</span>strip<span class="token punctuation">-</span>components=1 \
    &amp;&amp; rm nodejs.tar.gz \
    &amp;&amp; ln <span class="token punctuation">-</span>s /usr/local/bin/node /usr/local/bin/nodejs
<span class="token comment"># Install global tools</span>
<span class="token keyword">RUN</span> dotnet tool install <span class="token punctuation">-</span>g dotnetsay
<span class="token keyword">RUN</span> dotnet tool install <span class="token punctuation">-</span><span class="token punctuation">-</span>global dotnet<span class="token punctuation">-</span>sonarscanner <span class="token punctuation">-</span><span class="token punctuation">-</span>version 4.5.0
<span class="token comment"># Add global tools folder to PATH</span>
<span class="token keyword">ENV</span> PATH=<span class="token string">&quot;${PATH}:/root/.dotnet/tools&quot;</span>
<span class="token comment"># Get required packages for sonar scanner</span>
<span class="token keyword">RUN</span> apt<span class="token punctuation">-</span>get update &amp;&amp; apt<span class="token punctuation">-</span>get <span class="token punctuation">-</span>y install curl bash unzip yarn bzip2
<span class="token keyword">WORKDIR</span> /root
<span class="token keyword">ENV</span> LATEST=<span class="token string">'sonar-scanner-cli-3.3.0.1492-linux.zip'</span>
<span class="token comment"># Get &amp; install sonar scanner</span>
<span class="token keyword">RUN</span> <span class="token keyword">env</span> &amp;&amp; \
    curl <span class="token punctuation">-</span>OL <span class="token string">'https://binaries.sonarsource.com/Distribution/sonar-scanner-cli/'</span>$LATEST &amp;&amp; \
    mkdir sonar_scanner &amp;&amp; unzip <span class="token punctuation">-</span>d sonar_scanner $LATEST &amp;&amp; mv sonar_scanner/* sonar_home &amp;&amp; \
    rm <span class="token punctuation">-</span>rf sonar_scanner $LATEST
<span class="token comment"># Add sonar scanner to PATH</span>
<span class="token keyword">ENV</span> SONAR_RUNNER_HOME=/root/sonar_home
<span class="token keyword">ENV</span> PATH $<span class="token punctuation">{</span>SONAR_RUNNER_HOME<span class="token punctuation">}</span>/bin<span class="token punctuation">:</span>$PATH
<span class="token keyword">ARG</span> SONAR_HOST
<span class="token keyword">ARG</span> SONAR_LOGIN_TOKEN
<span class="token comment"># make temporary folder for seed analysis for javascript scanner</span>
<span class="token keyword">WORKDIR</span> /root/temp1
<span class="token keyword">RUN</span> mkdir src
<span class="token keyword">RUN</span> touch src/test.js
<span class="token comment"># Init sonarscanner cache with plugins</span>
<span class="token keyword">RUN</span> sonar<span class="token punctuation">-</span>scanner <span class="token punctuation">-</span>Dsonar.host.url=$SONAR_HOST <span class="token punctuation">-</span>Dsonar.login=$SONAR_LOGIN_TOKEN <span class="token punctuation">-</span>Dsonar.analysis.mode=preview <span class="token punctuation">-</span>Dsonar.projectKey=<span class="token string">&quot;pluginsSeedJS&quot;</span> <span class="token punctuation">-</span>Dsonar.sources=<span class="token string">&quot;src&quot;</span>
<span class="token keyword">WORKDIR</span> /root
<span class="token comment"># Remove temporary folder</span>
<span class="token keyword">RUN</span> rm /root/temp1 <span class="token punctuation">-</span>rf
<span class="token comment"># make temporary folder for seed analysis</span>
<span class="token keyword">WORKDIR</span> /root/temp2
<span class="token comment"># Init sonarscanner cache with plugins for .NET scanner</span>
<span class="token keyword">RUN</span> dotnet sonarscanner begin /k<span class="token punctuation">:</span><span class="token string">&quot;pluginsSeedNET&quot;</span> /d<span class="token punctuation">:</span>sonar.host.url=$SONAR_HOST /d<span class="token punctuation">:</span>sonar.login=$SONAR_LOGIN_TOKEN /d<span class="token punctuation">:</span>sonar.analysis.mode=preview
<span class="token keyword">RUN</span> dotnet new sln <span class="token punctuation">-</span><span class="token punctuation">-</span>name FooBar
<span class="token keyword">RUN</span> dotnet new mvc <span class="token punctuation">-</span><span class="token punctuation">-</span>name Foo <span class="token punctuation">-</span><span class="token punctuation">-</span>output Foo
<span class="token keyword">RUN</span> dotnet new console <span class="token punctuation">-</span><span class="token punctuation">-</span>name Bar <span class="token punctuation">-</span><span class="token punctuation">-</span>output Bar
<span class="token keyword">RUN</span> dotnet sln add ./Foo/Foo.csproj
<span class="token keyword">RUN</span> dotnet sln add ./Bar/Bar.csproj
<span class="token keyword">RUN</span> dotnet restore
<span class="token keyword">RUN</span> dotnet build FooBar.sln
<span class="token keyword">RUN</span> dotnet sonarscanner end /d<span class="token punctuation">:</span>sonar.login=$SONAR_LOGIN_TOKEN ; exit 0
<span class="token keyword">WORKDIR</span> /root
<span class="token comment"># Remove temporary folder</span>
<span class="token keyword">RUN</span> rm /root/temp2 <span class="token punctuation">-</span>rf
</code></pre></div><p>Ainda dentro da pasta que acabamos de criar executaremos o seguinte comando:</p> <div class="language- extra-class"><pre class="language-text"><code>docker build --network=host --tag sonar-scanner-image:latest --build-arg SONAR_HOST=&quot;http://localhost:9000&quot; --build-arg SONAR_LOGIN_TOKEN=&quot;TOKEN_VALUE&quot; .
</code></pre></div><p>Lembre-se de substituir &quot;TOKEN_VALUE&quot; pelo seu token criado na etapa 4.</p> <p>Pronto!</p> <h2 id="executando-o-scanner-em-um-projeto"><a href="#executando-o-scanner-em-um-projeto" class="header-anchor">#</a> Executando o Scanner em um projeto</h2> <p>Agora baixe o(s) projeto(s) que deve(m) passar pelo scanner nesta pasta.</p> <ol><li>Entre no diretório do projeto e crie o .dockerignore</li></ol> <div class="language- extra-class"><pre class="language-text"><code>touch .dockerignore
</code></pre></div><p>Neste arquivo que acabamos de criar adicione o seguinte (e as demais pastas que deseje que o sonarquebe ignore durante o scanner):</p> <div class="language- extra-class"><pre class="language-text"><code>.dockerignore
.vs
node_modules
</code></pre></div><ol start="2"><li>Crie um Dockerfile dentro do projeto a ser scanneado, e adicione o seguinte código:</li></ol> <blockquote><p>OBS: (caso ele já exista o substitua).</p></blockquote> <blockquote><p>SONAR_PROJECT_KEY = Nome do projeto Scanneado</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code># It is our freshly build sonar-scanner-image from previous steps that
# is used here as a base image in docker file that we will be working on
FROM sonar-scanner-image:latest AS sonarqube_scan
# Here we are setting up a working directory to /app. It is like using `cd app` command
WORKDIR /app
# Copying all files from the project directory to our current location (/app) in image
# except patterns mention in .dockerignore
COPY . .
# Execution of example command. Here it is used to show a list of files and directories.
# It will be useful in later exercises in this tutorial.
RUN ls -list
# To execute sonar-scanner we just need to run &quot;sonar-scanner&quot; in the image.
# To pass Sonarqube parameter we need to add &quot;-D&quot;prefix to each as in the example below
# sonar.host.url is property used to define URL of Sonarqube server
# sonar.projectKey is used to define project key that will be used to distinguish it in
# sonarqube server from other projects
# sonar.sources directory for sources of project
RUN sonar-scanner \
    -Dsonar.host.url=&quot;http://localhost:9000&quot; \
    -Dsonar.projectKey=&quot;SONAR_PROJECT_KEY&quot; \
    -Dsonar.sources=. \

</code></pre></div><ol start="3"><li>Agora, ainda dentro do diretório do projeto execute:</li></ol> <div class="language- extra-class"><pre class="language-text"><code>docker build --network=host --no-cache .
</code></pre></div><p>Após o termino do scanner. Ao entrar em <a href="http://localhost:9000/projects" target="_blank" rel="noopener noreferrer">http://localhost:9000/projects<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> você verá o seu projeto.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/install-programns/" class="prev">Instalação de programas</a></span> <span class="next"><a href="/sonarqube-utilizacao-rapida/">Sonarqube - Utilização Rápida</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.9f1471da.js" defer></script><script src="/assets/js/2.028e1938.js" defer></script><script src="/assets/js/29.38dc25ea.js" defer></script>
  </body>
</html>
