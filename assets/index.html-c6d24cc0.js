import{_ as e,p as s,q as o,a1 as r}from"./framework-de6eff89.js";const i={};function n(d,a){return s(),o("div",null,[...a[0]||(a[0]=[r(`<h1 id="ajuste-de-kernel-para-nvme-em-linux" tabindex="-1"><a class="header-anchor" href="#ajuste-de-kernel-para-nvme-em-linux" aria-hidden="true">#</a> Ajuste de Kernel para NVMe em Linux</h1><h2 id="reduzir-travamentos-e-aumentar-estabilidade" tabindex="-1"><a class="header-anchor" href="#reduzir-travamentos-e-aumentar-estabilidade" aria-hidden="true">#</a> Reduzir Travamentos e Aumentar Estabilidade</h2><p>Problema ocorria muito, muitos travamentos do computador ao usar Docker, ou mesmo ao abrir o navegador com muitas abas. A solução é simples e rápida, mas pode fazer uma grande diferença na estabilidade do sistema.</p><h2 id="resumo" tabindex="-1"><a class="header-anchor" href="#resumo" aria-hidden="true">#</a> Resumo</h2><ul><li><strong>Problema</strong>: Discos NVMe de alta velocidade entram em modo de economia de energia, causando travamentos e quedas de performance.</li><li><strong>Solução</strong>: Desabilitar os estados de economia de energia do NVMe no kernel Linux.</li><li><strong>Resultado</strong>: Sistema mais estável, sem travamentos repentinos, especialmente sob carga intensa de I/O.</li></ul><h2 id="introducao" tabindex="-1"><a class="header-anchor" href="#introducao" aria-hidden="true">#</a> Introdução</h2><p>Em ambientes Linux modernos com discos NVMe de alta velocidade (especialmente PCIe Gen4 ou Gen5), o kernel padrão permite que o SSD entre em estados de economia de energia.<br> Embora isso ajude a reduzir consumo energético, pode <strong>gerar travamentos repentinos</strong> ou <strong>quedas de performance</strong> quando o sistema precisa acessar rapidamente o disco sob alta carga de I/O (como rodando Docker, testes pesados, ou aplicativos que fazem muitas leituras/escritas).</p><p>Para evitar esse problema, é recomendado <strong>desabilitar os estados de economia de energia no NVMe</strong>.<br> Isso mantém o disco sempre ativo e elimina travamentos relacionados a latência de acesso.</p><h2 id="solucao" tabindex="-1"><a class="header-anchor" href="#solucao" aria-hidden="true">#</a> Solução</h2><p>Ajustar o kernel adicionando o parâmetro:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token assign-left variable">nvme_core.default_ps_max_latency_us</span><span class="token operator">=</span><span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Esse parâmetro:</p><ul><li>Desativa modos de economia de energia do NVMe</li><li>Mantém o SSD sempre pronto para acesso</li><li>Previne travamentos e quedas para tela initramfs</li><li>Consome uma quantidade desprezível a mais de energia, sem impactos reais em desktop</li></ul><h2 id="passos-para-aplicar-a-solucao" tabindex="-1"><a class="header-anchor" href="#passos-para-aplicar-a-solucao" aria-hidden="true">#</a> Passos para aplicar a solução</h2><h3 id="_1-editar-o-arquivo-de-configuracao-do-grub" tabindex="-1"><a class="header-anchor" href="#_1-editar-o-arquivo-de-configuracao-do-grub" aria-hidden="true">#</a> 1. Editar o arquivo de configuração do GRUB</h3><p>Abra o terminal e edite o GRUB:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">nano</span> /etc/default/grub
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_2-localizar-a-linha-de-parametros-do-kernel" tabindex="-1"><a class="header-anchor" href="#_2-localizar-a-linha-de-parametros-do-kernel" aria-hidden="true">#</a> 2. Localizar a linha de parâmetros do kernel</h3><p>Procure pela linha:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token assign-left variable">GRUB_CMDLINE_LINUX_DEFAULT</span><span class="token operator">=</span><span class="token string">&quot;quiet splash&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>e modifique para:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token assign-left variable">GRUB_CMDLINE_LINUX_DEFAULT</span><span class="token operator">=</span><span class="token string">&quot;quiet splash nvme_core.default_ps_max_latency_us=0&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">NOTA</p><p>Se já existirem outros parâmetros dentro das aspas, apenas adicione <code>nvme_core.default_ps_max_latency_us=0</code> ao final, separado por espaço.</p></div><h3 id="_3-atualizar-o-grub" tabindex="-1"><a class="header-anchor" href="#_3-atualizar-o-grub" aria-hidden="true">#</a> 3. Atualizar o GRUB</h3><p>Após salvar a alteração (Ctrl + O, Enter, depois Ctrl + X para sair), atualize o GRUB:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">update-grub</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_4-reiniciar-o-computador" tabindex="-1"><a class="header-anchor" href="#_4-reiniciar-o-computador" aria-hidden="true">#</a> 4. Reiniciar o computador</h3><p>Finalmente, reinicie a máquina para aplicar a nova configuração:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">reboot</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="por-que-esse-ajuste-e-necessario" tabindex="-1"><a class="header-anchor" href="#por-que-esse-ajuste-e-necessario" aria-hidden="true">#</a> Por que esse ajuste é necessário?</h2><ul><li><p>Discos NVMe de alta performance são muito rápidos, mas o padrão do Linux permite que eles &quot;durmam&quot; para economizar energia.</p></li><li><p>Quando o sistema precisa acessar o disco que está &quot;adormecido&quot;, há uma latência de wake-up que pode causar:</p><ul><li>Travamentos rápidos</li><li>Quedas de performance</li><li>Tela de recuperação (initramfs) se o disco não responde a tempo</li></ul></li><li><p>Desativando o modo de economia (default_ps_max_latency_us=0), o disco permanece totalmente acordado e elimina os problemas de latência.</p></li><li><p>Essa solução é altamente recomendada para quem usa Ubuntu, Fedora, Arch, ou derivados com hardware moderno.</p></li></ul><h2 id="resultado-esperado" tabindex="-1"><a class="header-anchor" href="#resultado-esperado" aria-hidden="true">#</a> Resultado Esperado</h2><p>Após aplicar esse ajuste:</p><ul><li>Sistema muito mais estável mesmo sob uso intenso (ex.: containers Docker, grandes operações de disco).</li><li>Nenhum travamento relacionado a NVMe esperado.</li><li>SSD funcionando no máximo desempenho o tempo todo.</li></ul>`,34)])])}const l=e(i,[["render",n],["__file","index.html.vue"]]);export{l as default};
